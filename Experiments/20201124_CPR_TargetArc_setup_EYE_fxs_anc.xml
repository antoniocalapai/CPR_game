<?xml version="1.0"?>
<monkeyml version="1.0">
    <io_devices tag="IO Devices">
        <iodevice type="stimulus_display" tag="Stimulus Display" background_color="0, 0, 0" redraw_on_every_refresh="NO" announce_stimuli_on_implicit_updates="YES"></iodevice>
        <iodevice tag="mIO" type="mIO" data_interval="1ms" joystick_direction="IO_joystickDirection" joystick_strength="IO_joystickStrength" joystick_x_raw="IO_joystickX_raw" joystick_y_raw="IO_joystickY_raw" joystick_x_calib="IO_joystickX_calib" joystick_y_calib="IO_joystickY_calib" reward_a="IO_rewardA"></iodevice>
        <iodevice tag="Eyelink" type="eyelink" data_interval="1ms" eye_rx="EYE_rightX_raw" eye_ry="EYE_rightY_raw" eye_lx="EYE_leftX_raw" eye_ly="EYE_leftY_raw" eye_x="EYE_x_raw" eye_y="EYE_y_raw" eye_z="EYE_z_raw" href_rx="EYE_rightX_href" href_ry="EYE_rightY_href" href_lx="EYE_leftX_href" href_ly="EYE_leftY_href" pupil_rx="EYE_rightPupilX_raw" pupil_ry="EYE_rightPupilY_raw" pupil_lx="EYE_leftPupilX_raw" pupil_ly="EYE_leftPupilY_raw" pupil_size_r="EYE_rightPupilSize_raw" pupil_size_l="EYE_leftPupilSize_raw" eye_time="EYE_sampleTime_ms" tracking_dist="1024" tracker_ip="100.1.1.1"></iodevice>
        <calibrator type="standard_eye_calibrator" tag="EyeCalibrator" eyeh_raw="EYE_x_raw" eyev_raw="EYE_y_raw" eyeh_calibrated="EYE_x_dva" eyev_calibrated="EYE_y_dva"></calibrator>
        <filter type="basic_eye_monitor" tag="EyeMonitor" eyeh_calibrated="EYE_x_dva" eyev_calibrated="EYE_y_dva" eye_state="EYE_saccade" width_samples="5" saccade_entry_speed="50" saccade_exit_speed="20"></filter>
    </io_devices>
    <variables tag="Variables">
        <folder tag="CTRL">
            <variable tag="CTRL_RequiredHitNo" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable> 
            <variable tag="CTRL_NoSteadyStates" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="15" type="any"></variable>
            <variable tag="CTRL_ITI_ms" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1000" type="any"></variable>
            <variable tag="CTRL_steadyState_min" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_steadyState_max" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_SteadyStateDuration" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_directionChange_list" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="45,90,135,180" type="list"></variable>
            <variable tag="CTRL_frameTimer_duration" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="16" type="any"></variable>
            <variable tag="CTRL_snr_idx" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_snr_thresh" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_Xmax" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="15.2024" type="any"></variable>
            <variable tag="CTRL_Ymax" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="11.4018" type="any"></variable>
            <variable tag="CTRL_start_area_colorChange_ms" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="500" type="any"></variable>
            <variable tag="CTRL_start_area_col_r" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_start_area_col_g" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_start_area_col_b" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_idx" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_size" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="2" type="any"></variable>
            <variable tag="CTRL_target_deg" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="2" type="any"></variable>
            <variable tag="CTRL_target_ON" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_duration" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_direction" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_x" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_y" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_alpha" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0.5" type="any"></variable>
            <variable tag="CTRL_target_col_r" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_col_g" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_col_b" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_flag" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_flag1" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_flag2" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_flag3" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_flag4" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_target_collision_area" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="2" type="any"></variable>
            <variable tag="CTRL_arc_treshold" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value=".08" type="any"></variable>
            <variable tag="CTRL_arc_width" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_arc_size" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="20" type="any"></variable>
            <variable tag="CTRL_arc_flag" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_arc_alpha" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1" type="any"></variable>
            <variable tag="CTRL_arc_trigger_min" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0.5" type="any"></variable>
            <variable tag="CTRL_arc_trigger_max" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0.5" type="any"></variable>
            <variable tag="CTRL_arc_col_r" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1" type="any"></variable>
            <variable tag="CTRL_arc_col_g" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1" type="any"></variable>
            <variable tag="CTRL_arc_col_b" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_arcMask_size" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="17" type="any"></variable>
            <variable tag="CTRL_arcMask_flag" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_breakout_flag" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_hit_flag" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_PreSNR_StimDuration" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_PreRT_ResponseWindow" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
        </folder>
        <folder tag="INFO">
            <variable tag="INFO_task" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="INFO_training" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="INFO_HitCounter" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="INFO_TargetCounter" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="INFO_SteadyStateCounter" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="INFO_cursor_accuracyDisplay" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="INFO_ExtraCash" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
        </folder>
        <folder tag="IO">
            <variable tag="IO_joystickDirection" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="float"></variable>
            <variable tag="IO_joystickStrength" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_joystickX_raw" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="integer"></variable>
            <variable tag="IO_joystickY_raw" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="integer"></variable>
            <variable tag="IO_joystickX_calib" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="float"></variable>
            <variable tag="IO_joystickY_calib" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="float"></variable>
            <variable tag="IO_start_area_flag" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_start_area_size" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_start_area_alpha" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_rewardA" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_cursor_distance2center" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_cursor_accuracy" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_cursor_x" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_cursor_y" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="IO_cursor_radius" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0.5" type="any"></variable>
        </folder>
        <folder tag="TMP">
            <variable tag="pi" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="3.14159265359" type="any"></variable>
            <variable tag="TMP_dice" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="TMP_RDPdir" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="TMP_joyDeviation" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="TMP_normStimDir" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="TMP_normJoyDir" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="TMP_ExtraCash" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
        </folder>
        <folder tag="RDP">
            <variable tag="RDP_radius" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="8" type="any"></variable>
            <variable tag="RDP_direction" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="RDP_y" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="RDP_x" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="RDP_density" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="5" type="any"></variable>
            <variable tag="RDP_dotsize" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0.2" type="any"></variable>
            <variable tag="RDP_speed" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="4" type="any"></variable>
            <variable tag="RDP_coherence" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="RDP_lifetime" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0.3" type="any"></variable>
        </folder>
        <folder tag="ML">
            <variable tag="ML_trialEnd" scope="global" logging="when_changed" default_value="0" type="integer"></variable>
            <variable tag="ML_trialStart" scope="global" logging="when_changed" default_value="0" type="integer"></variable>
            <variable tag="ML_sync" scope="global" logging="when_changed" default_value="0" type="boolean"></variable>
        </folder>
        <folder tag="TRIAL">
            <variable tag="TRIAL_outcome" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="TRIAL_reactionTrigger" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="TRIAL_reactionEvent" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
        </folder>
        <folder tag="SC">
            <variable tag="SC_list" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1, 0.9, 0.81, 0.729, 0.6561, 0.59049, 0.531441, 0.478297, 0.430467, 0.38742, 0.348678, 0.313811, 0.28243, 0.254187, 0.228768, 0.205891, 0.185302, 0.166772, 0.150095, 0.135085, 0.121577, 0.109419, 0.098477, 0.088629, 0.079766, 0.07179, 0.064611, 0.05815, 0.052335, 0.047101, 0.042391, 0.038152, 0.034337, 0.030903, 0.027813, 0.025032, 0.022528, 0.020276, 0.018248, 0.016423, 0.014781, 0.013303, 0.011973, 0.010775, 0.009698, 0.008728, 0.007855, 0.00707, 0.006363, 0.005726" type="list"></variable>
            <variable tag="SC_steps" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="&quot;1 0.9 0.81 0.729 0.6561 0.59049 0.531441 0.478297 0.430467 0.38742 0.348678 0.313811 0.28243 0.254187 0.228768 0.205891 0.185302 0.166772 0.150095 0.135085 0.121577 0.109419 0.098477 0.088629 0.079766 0.07179 0.064611 0.05815 0.052335 0.047101 0.042391 0.038152 0.034337 0.030903 0.027813 0.025032 0.022528 0.020276 0.018248 0.016423 0.014781 0.013303 0.011973 0.010775 0.009698 0.008728 0.007855 0.00707 0.006363 0.005726&quot;" type="any"></variable>
            <variable tag="SC_in" scope="global" logging="when_changed" default_value="0" type="boolean" persistant="0"></variable>
            <variable tag="SC_out" scope="global" logging="when_changed" default_value="0" type="float" persistant="0"></variable>
            <variable tag="SC_left_step" scope="global" logging="when_changed" default_value="2" type="integer" persistant="1"></variable>
            <variable tag="SC_right_step" scope="global" logging="when_changed" default_value="1" type="integer" persistant="1"></variable>
            <variable tag="SC_index_starting" scope="global" logging="when_changed" default_value="1" type="integer" persistant="1"></variable>
        </folder>
        <folder tag="EYE">
            <variable tag="EYE_x_dva" scope="global" logging="when_changed" default_value="0" type="float" persistant="0"></variable>
            <variable tag="EYE_y_dva" scope="global" logging="when_changed" default_value="0" type="float" persistant="0"></variable>
            <variable tag="EYE_z_dva" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_rightX_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_rightY_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_leftX_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_leftY_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_x_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_y_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_z_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_rightX_href" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_rightY_href" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_leftX_href" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_leftY_href" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_rightPupilX_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_rightPupilY_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_leftPupilX_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_leftPupilY_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_rightPupilSize_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_leftPupilSize_raw" scope="global" logging="when_changed" default_value="0" type="float"></variable>
            <variable tag="EYE_sampleTime_ms" scope="global" logging="when_changed" default_value="0" type="integer"></variable>
            <variable tag="EYE_saccade" scope="global" logging="when_changed" default_value="0" type="boolean"></variable>
            <variable tag="local_posX" scope="local" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="local_posY" scope="local" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
        </folder>
        <folder tag="CALIB">
            <variable tag="fixationPoint_color_r" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1" type="integer"></variable>
            <variable tag="fixationPoint_color_g" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1" type="integer"></variable>
            <variable tag="fixationPoint_color_b" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="1" type="integer"></variable>
            <variable tag="IO_fixationPoint" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="CTRL_fixationWidth_dva" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="100" type="any"></variable>
            <variable tag="fixationPoint_posX" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
            <variable tag="fixationPoint_posY" scope="global" logging="when_changed" exclude_from_data_file="NO" default_value="0" type="any"></variable>
        </folder>
    </variables>
    <sounds tag="Sounds">
        <sound tag="Reward" type="wav_file" path="./sounds/reward.wav" amplitude="1.0"></sound>
        <sound tag="Miss" type="wav_file" path="./sounds/start.wav" amplitude="1.0"></sound>
        <sound tag="Abort" type="wav_file" path="/Users/cnl/Desktop/CPR/Experiments/Sounds/failure.wav" amplitude="1.0"></sound>
    </sounds>
    <stimuli tag="Stimuli">
        <stimulus type="fixation_point" tag="fixationPoint" color="fixationPoint_color_r,fixationPoint_color_g,fixationPoint_color_b" trigger_width="CTRL_fixationWidth_dva" trigger_watch_x="EYE_x_dva" trigger_watch_y="EYE_y_dva" trigger_flag="IO_fixationPoint" x_size="0.5" y_size="0.5" x_position="fixationPoint_posX" y_position="fixationPoint_posY" rotation="0" alpha_multiplier="1"></stimulus>
        <stimulus type="blank_screen" tag="Background" color="0.5,0.5,0.5"></stimulus>
        <stimulus type="circular_fixation_point" tag="start_area" color="CTRL_start_area_col_r,CTRL_start_area_col_g,CTRL_start_area_col_b" trigger_width="IO_start_area_size" trigger_watch_x="-IO_cursor_x" trigger_watch_y="IO_cursor_y" trigger_flag="IO_start_area_flag" x_size="IO_start_area_size" y_size="IO_start_area_size" x_position="0" y_position="0" rotation="0" alpha_multiplier="IO_start_area_alpha"></stimulus>
        <stimulus type="r_d_p" tag="RDP" radius="RDP_radius" x_position="RDP_x" y_position="RDP_y" dot_density="RDP_density" dot_size="RDP_dotsize" color="1,1,1" alpha_multiplier="1.0" direction="RDP_direction" speed="RDP_speed" coherence="RDP_coherence" lifetime="RDP_lifetime" announce_dots="NO" autoplay="YES"></stimulus>
        <stimulus type="advstimulus" tag="cursor" trigger_width="0" trigger_watch_x="0" trigger_watch_y="0" trigger_flag="0" x_size="IO_cursor_radius * 2" y_size="IO_cursor_radius * 2" x_position="CTRL_Xmax * IO_joystickX_calib" y_position="CTRL_Ymax * IO_joystickY_calib" shape="&quot;circle&quot;" color="CTRL_arc_col_r,CTRL_arc_col_g,CTRL_arc_col_b" rotation="0" alpha_multiplier="1" version="1" autoplay="YES"></stimulus>
        <stimulus type="circular_fixation_point" tag="target" color="CTRL_target_col_r,CTRL_target_col_g,CTRL_target_col_b" trigger_width="CTRL_target_size + CTRL_target_collision_area" trigger_watch_x="-IO_cursor_x" trigger_watch_y="IO_cursor_y" trigger_flag="CTRL_target_flag" x_size="CTRL_target_size" y_size="CTRL_target_size" x_position="CTRL_target_x" y_position="CTRL_target_y" rotation="0" alpha_multiplier="CTRL_target_alpha"></stimulus>
        <stimulus type="advstimulus" tag="indicator" trigger_width="0" trigger_watch_x="0" trigger_watch_y="0" trigger_flag="0" x_size="IO_cursor_radius * 2" y_size="IO_cursor_radius * 2" x_position="sin((IO_joystickDirection)*(pi/180))* (RDP_radius + (CTRL_target_size/1.5))" y_position="cos((IO_joystickDirection)*(pi/180))* (RDP_radius + (CTRL_target_size/1.5))" shape="&quot;symmetric 3&quot;" color="1,1,1" rotation="-IO_joystickDirection" alpha_multiplier="CTRL_arc_alpha" version="1" autoplay="YES"></stimulus>
        <stimulus type="advstimulus" tag="arc" trigger_width="CTRL_arc_size" trigger_watch_x="CTRL_target_x" trigger_watch_y="CTRL_target_y" trigger_flag="CTRL_arc_flag" x_size="CTRL_arc_size" y_size="CTRL_arc_size" x_position="0" y_position="0" shape="format(&quot;circle %d&quot;, (integer)CTRL_arc_width)" color="CTRL_arc_col_r,CTRL_arc_col_g,CTRL_arc_col_b" rotation="-IO_joystickDirection + (CTRL_arc_width/2)" alpha_multiplier="CTRL_arc_alpha" version="1" autoplay="YES"></stimulus>
        <stimulus type="circular_fixation_point" tag="arcMask" color="0.5,0.5,0.5" trigger_width="CTRL_arcMask_size" trigger_watch_x="IO_cursor_x" trigger_watch_y="IO_cursor_x" trigger_flag="CTRL_arcMask_flag" x_size="CTRL_arcMask_size" y_size="CTRL_arcMask_size" x_position="0" y_position="0" rotation="0" alpha_multiplier="1"></stimulus>
        <stimulus type="text" tag="feedback_accuracy" text="format(&quot;Accuracy: %d&quot;, INFO_cursor_accuracyDisplay)" font_name="Arial" font_size="35" text_alignment="left" color="1,1,1" x_size="10" y_size="10" x_position="-12" y_position="4" rotation="0" alpha_multiplier="1"></stimulus>
        <stimulus type="text" tag="feedback_strength" text="format(&quot;Strength: %d&quot;, (round(IO_joystickStrength*100)/100))" font_name="Arial" font_size="35" text_alignment="left" color="1,1,1" x_size="10" y_size="10" x_position="-12" y_position="3" rotation="0" alpha_multiplier="1"></stimulus>
        <stimulus type="text" tag="feedback_reward" text="format(&quot;Reward: %d CNT&quot;, round(TMP_ExtraCash*100))" font_name="Arial" font_size="35" text_alignment="left" color="1,.5,.5" x_size="10" y_size="10" x_position="-12" y_position="5" rotation="0" alpha_multiplier="1"></stimulus>
        <stimulus type="circular_fixation_point" tag="target1" color="1,0,0" trigger_width="CTRL_target_size +CTRL_target_collision_area" trigger_watch_x="IO_cursor_x" trigger_watch_y="IO_cursor_y" trigger_flag="CTRL_target_flag1" x_size="CTRL_target_size" y_size="CTRL_target_size" x_position="0" y_position="9" rotation="0" alpha_multiplier="0"></stimulus>
        <stimulus type="circular_fixation_point" tag="target2" color="1,0,0" trigger_width="CTRL_target_size + CTRL_target_collision_area" trigger_watch_x="IO_cursor_x" trigger_watch_y="IO_cursor_y" trigger_flag="CTRL_target_flag2" x_size="CTRL_target_size" y_size="CTRL_target_size" x_position="-9" y_position="0" rotation="0" alpha_multiplier="0"></stimulus>
        <stimulus type="circular_fixation_point" tag="target3" color="1,0,0" trigger_width="CTRL_target_size + CTRL_target_collision_area" trigger_watch_x="IO_cursor_x" trigger_watch_y="IO_cursor_y" trigger_flag="CTRL_target_flag3" x_size="CTRL_target_size" y_size="CTRL_target_size" x_position="0" y_position="-9" rotation="0" alpha_multiplier="0"></stimulus>
        <stimulus type="circular_fixation_point" tag="target4" color="1,0,0" trigger_width="CTRL_target_size + CTRL_target_collision_area" trigger_watch_x="IO_cursor_x" trigger_watch_y="IO_cursor_y" trigger_flag="CTRL_target_flag4" x_size="CTRL_target_size" y_size="CTRL_target_size" x_position="9" y_position="0" rotation="0" alpha_multiplier="0"></stimulus>
        <stimulus type="image_file" tag="target_coin" path="./coin.png" x_size="CTRL_target_size" y_size="CTRL_target_size" x_position="CTRL_target_x" y_position="CTRL_target_y" rotation="0" alpha_multiplier="1" deferred="NO"></stimulus>
        <stimulus type="image_file" tag="target_coin1" path="./coin.png" x_size="2" y_size="2" x_position="0" y_position="9" rotation="0" alpha_multiplier="1" deferred="NO"></stimulus>
        <stimulus type="image_file" tag="target_coin2" path="./coin.png" x_size="2" y_size="2" x_position="-9" y_position="0" rotation="0" alpha_multiplier="1" deferred="NO"></stimulus>
        <stimulus type="image_file" tag="target_coin3" path="./coin.png" x_size="2" y_size="2" x_position="0" y_position="-9" rotation="0" alpha_multiplier="1" deferred="NO"></stimulus>
        <stimulus type="image_file" tag="target_coin4" path="./coin.png" x_size="2" y_size="2" x_position="9" y_position="0" rotation="0" alpha_multiplier="1" deferred="NO"></stimulus>
    </stimuli>
    <filters tag="Filters"></filters>
    <optimizers tag="Optimizers">
        <filter type="Staircase_Optimizer" tag="SC_noise" input="SC_in" output="SC_out" steps_csv="SC_steps" index="SC_index_starting" leftCriterion="SC_left_step" version="INFO_task" rightCriterion="SC_right_step"></filter>
    </optimizers>
    <resources tag="Resources"></resources>
    <experiment tag="New Experiment" full_name="" description="">
        <protocol tag="Calibration-9p" nsamples="1" sampling_method="cycles" selection="sequential">
            <action type="start_device_IO" tag="Start (Eyelink)" device="Eyelink"></action>
            <block tag="Calibration Block" nsamples="1" sampling_method="cycles" selection="sequential">
                <trial tag="Calibration Trial" nsamples="1" sampling_method="cycles" selection="sequential">
                    <action tag="Clear Calibration" type="clear_calibration" calibrator="EyeCalibrator"></action>
                    <action type="queue_stimulus" tag="Queue (Background)" stimulus="Background"></action>
                    <trial tag="Calibration List" nsamples="1" sampling_method="cycles" selection="random_without_replacement">
                        <range_replicator tag="Califixpoint position x" from="-10" to="10" step="5" variable="local_posX">
                            <range_replicator tag="Califixpoint position y" from="-10" to="10" step="5" variable="local_posY">
                                <task_system tag="Calibration System" interruptible="YES">
                                    <task_system_state tag="BEGIN_STATE_SYSTEM" interruptible="YES">
                                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                                        <action type="assignment" tag="fixationPoint_posX = local_posX" variable="fixationPoint_posX" value="local_posX"></action>
                                        <action type="assignment" tag="fixationPoint_posY = local_posY" variable="fixationPoint_posY" value="local_posY"></action>
                                        <action type="report" tag="log( &quot;Calibration Trial; Fixation point at x= &quot; )" message="Calibration Trial; Fixation point at x= $fixationPoint_posX , y= $fixationPoint_posY , fixation width = $CTRL_fixationWidth_dva"></action>
                                        <action type="queue_stimulus" tag="queue( fixationPoint )" stimulus="fixationPoint"></action>
                                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                                        <transition type="direct" tag="always goto SHOW_CALIBRATION_POINT" target="SHOW_CALIBRATION_POINT"></transition>
                                    </task_system_state>
                                    <task_system_state tag="SHOW_CALIBRATION_POINT" interruptible="YES">
                                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                                        <action type="report" tag="log( &quot;Calibration Trial; Fixation point at x= &quot; )" message="Calibration Trial; Fixation point at x= $fixationPoint_posX , y= $fixationPoint_posY , fixation width = $CTRL_fixationWidth_dva"></action>
                                        <action tag="update stimulus display" type="update_stimulus_display" predicted_output_time=""></action>
                                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                                        <transition type="conditional" tag="if( IO_fixationPoint ) goto PRE_AQUIRE" condition="IO_fixationPoint" target="PRE_AQUIRE"></transition>
                                    </task_system_state>
                                    <task_system_state tag="PRE_AQUIRE" interruptible="YES">
                                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                                        <action type="report" tag="log( &quot;Pre Fixation Time ...&quot; )" message="Pre Fixation Time ..."></action>
                                        <action type="start_timer" tag="start( PreAquireTimer = (250)ms @base )" timer="PreAquireTimer" timebase="" duration="250" duration_units="ms"></action>
                                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                                        <transition type="conditional" tag="if( IO_fixationPoint == 0 ) goto SHOW_CALIBRATION_POINT" condition="IO_fixationPoint == 0" target="SHOW_CALIBRATION_POINT"></transition>
                                        <transition type="timer_expired" tag="if( PreAquireTimer ) goto CALIBRATION_AQUIRE" target="CALIBRATION_AQUIRE" timer="PreAquireTimer"></transition>
                                    </task_system_state>
                                    <task_system_state tag="CALIBRATION_AQUIRE" interruptible="YES">
                                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                                        <action type="start_timer" tag="start( fixation_timer = (1000)ms @base )" timer="fixation_timer" timebase="" duration="1000" duration_units="ms"></action>
                                        <action tag="Begin Averaged Calibration Sample" type="begin_calibration_average" calibrator="EyeCalibrator"></action>
                                        <action type="report" tag="log( &quot;====== GETTING SAMPLES ======&quot; )" message="====== GETTING SAMPLES ======"></action>
                                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                                        <transition type="conditional" tag="if( NOT( IO_fixationPoint ) ) goto FIXATION_BREAK" condition="NOT( IO_fixationPoint )" target="FIXATION_BREAK"></transition>
                                        <transition type="timer_expired" tag="if( fixation_timer ) goto ACCEPT_SAMPLES" target="ACCEPT_SAMPLES" timer="fixation_timer"></transition>
                                    </task_system_state>
                                    <task_system_state tag="ACCEPT_SAMPLES" interruptible="YES">
                                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                                        <action tag="End Averaged Calibration Sample" type="end_calibration_average_and_take_sample" calibrator="EyeCalibrator" calibratable_object="fixationPoint"></action>
                                        <action type="dequeue_stimulus" tag="dequeue( fixationPoint )" stimulus="fixationPoint"></action>
                                        <action tag="update stimulus display" type="update_stimulus_display" predicted_output_time=""></action>
                                        <action tag="Accept Trial" type="accept_selections" selection="Calibration List"></action>
                                        <action type="report" tag="log( &quot;Fixation Maintained -- Trial Accepted !!&quot; )" message="Fixation Maintained -- Trial Accepted !!!"></action>
                                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                                        <transition type="direct" tag="always goto EXIT_STATE_SYSTEM" target="EXIT_STATE_SYSTEM"></transition>
                                    </task_system_state>
                                    <task_system_state tag="FIXATION_BREAK" interruptible="YES">
                                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                                        <action tag="End Averaged Calibration Sample" type="end_calibration_average_and_ignore" calibrator="EyeCalibrator"></action>
                                        <action type="dequeue_stimulus" tag="dequeue( fixationPoint )" stimulus="fixationPoint"></action>
                                        <action tag="update stimulus display" type="update_stimulus_display" predicted_output_time=""></action>
                                        <action tag="Reject Trial" type="reject_selections" selection="Calibration List"></action>
                                        <action type="report" tag="log( &quot;Fixation Lost -- Trial Rejected.&quot; )" message="Fixation Lost -- Trial Rejected."></action>
                                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                                        <transition type="direct" tag="always goto EXIT_STATE_SYSTEM" target="EXIT_STATE_SYSTEM"></transition>
                                    </task_system_state>
                                    <task_system_state tag="EXIT_STATE_SYSTEM" interruptible="YES">
                                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                                        <action type="wait" tag="wait( 1000ms )" duration="1000" duration_units="ms"></action>
                                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                                        <transition tag="return to parent task system" type="yield"></transition>
                                    </task_system_state>
                                </task_system>
                            </range_replicator>
                        </range_replicator>
                    </trial>
                    <action tag="Update Calibration" type="update_calibration" calibrator="EyeCalibrator"></action>
                    <action type="dequeue_stimulus" tag="Dequeue(Background)" stimulus="Background"></action>
                    <action tag="Update stimulus display" type="update_stimulus_display" predicted_output_time=""></action>
                </trial>
            </block>
            <action type="stop_device_IO" tag="Stop (Eyelink)" device="Eyelink"></action>
        </protocol>
        <protocol tag="Pre-test SNR" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action type="start_device_IO" tag="Start Eyelink" device="Eyelink"></action>
            <action tag="Queue background" type="queue_stimulus" stimulus="Background"></action>
            <action tag="Start mIO" type="start_device_IO" device="mIO"></action>
            <action tag="Live Queue cursor" type="live_queue_stimulus" stimulus="cursor"></action>
            <action tag="Update Display" type="update_stimulus_display"></action>
            <action type="if" tag="Set Parameter" condition="1">
                <action type="assignment" tag="Set CTRL_PreSNR_StimDuration" variable="CTRL_PreSNR_StimDuration" value="1000"></action>
                <action type="assignment" tag="Set IO_start_area_size" variable="IO_start_area_size" value="3"></action>
                <action type="assignment" tag="Set IO_start_area_alpha" variable="IO_start_area_alpha" value=".3"></action>
                <action type="assignment" tag="Set Staircase Starting point" variable="SC_index_starting" value="1"></action>
                <action type="assignment" tag="Set additional collision area" variable="CTRL_target_collision_area" value="1"></action>
                <action type="assignment" tag="Reset INFO_HitCounter" variable="INFO_HitCounter" value="0"></action>
                <action type="assignment" tag="Reset ML_trialStart" variable="ML_trialStart" value="0"></action>
                <action type="assignment" tag="Reset ML_trialEnd" variable="ML_trialEnd" value="0"></action>
            </action>
            <trial tag="Main Task System" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="LOOP" interruptible="YES">
                    <task_system_state tag="Wait for joystick" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue start_area" type="queue_stimulus" stimulus="start_area"></action>
                        <action type="assignment" tag="Update Cursor Position X" variable="IO_cursor_x" value="-CTRL_Xmax * IO_joystickX_calib"></action>
                        <action type="assignment" tag="Update Cursor Position Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If Cursor inside start area, go to New Trial" condition="IO_start_area_flag" target="New Trial"></transition>
                        <transition type="conditional" tag="If Cursor inside start area, go to Wait For Joystick" condition="IO_start_area_flag == 0" target="Wait for joystick"></transition>
                    </task_system_state>
                    <task_system_state tag="New Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Set Matlab variables" condition="1">
                            <action type="assignment" tag="set ML sync" variable="ML_sync" value="1"></action>
                            <action type="assignment" tag="set ML trial start" variable="ML_trialStart" value="ML_trialStart + 1"></action>
                            <action type="assignment" tag="Log task name" variable="INFO_task" value="&quot;pre-test-SNR&quot;"></action>
                        </action>
                        <action tag="Live Queue RDP" type="live_queue_stimulus" stimulus="RDP"></action>
                        <action type="assignment" tag="Select RDP direction[90,180,270,360]" variable="RDP_direction" value="disc_rand(0,3)*90"></action>
                        <action type="assignment" tag="Set RDP coherence to SC_out" variable="RDP_coherence" value="SC_out"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="start_timer" tag="Start Timer (StimTimer)" timer="StimTimer" timebase="" duration="CTRL_PreSNR_StimDuration" duration_units="ms"></action>
                        <action type="report" tag="Report trial start" message="===== TRIAL $ML_trialStart STARTS====="></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Go to update stimulus" target="Update Stimulus"></transition>
                    </task_system_state>
                    <task_system_state tag="Update Stimulus" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start Timer (FrameTimer)" timer="FrameTimer" timebase="" duration="16" duration_units="ms"></action>
                        <action type="assignment" tag="Update Cursor Position X" variable="IO_cursor_x" value="-CTRL_Xmax * IO_joystickX_calib"></action>
                        <action type="assignment" tag="Update Cursor Position Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="if start_area left go to false alarm" condition="IO_start_area_flag == 0" target="False Alarm"></transition>
                        <transition type="conditional" tag="if StimTimer Expired go to Show Target" condition="timer_expired(StimTimer)" target="Show Target"></transition>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to Update Stimulus" target="Update Stimulus" timer="FrameTimer"></transition>
                    </task_system_state>
                    <task_system_state tag="Show Target" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report" message="-- Show Targets"></action>
                        <action tag="Live Queue cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue start_area" type="dequeue_stimulus" stimulus="start_area"></action>
                        <action tag="Dequeue RDP" type="dequeue_stimulus" stimulus="RDP"></action>
                        <action type="if" tag="Queue Targets" condition="1">
                            <action tag="Live Queue Target 1" type="live_queue_stimulus" stimulus="target1"></action>
                            <action tag="Live Queue Target 2" type="live_queue_stimulus" stimulus="target2"></action>
                            <action tag="Live Queue Target 3" type="live_queue_stimulus" stimulus="target3"></action>
                            <action tag="Live Queue Target 4" type="live_queue_stimulus" stimulus="target4"></action>
                            <action tag="Live Queue Target_coin1" type="live_queue_stimulus" stimulus="target_coin1"></action>
                            <action tag="Live Queue Target_coin 2" type="live_queue_stimulus" stimulus="target_coin2"></action>
                            <action tag="Live Queue Target_coin 3" type="live_queue_stimulus" stimulus="target_coin3"></action>
                            <action tag="Live Queue Target_coin 4" type="live_queue_stimulus" stimulus="target_coin4"></action>
                        </action>
                        <action type="assignment" tag="Set TRIAL_reactionTrigger to 1" variable="TRIAL_reactionTrigger" value="1"></action>
                        <action type="schedule" tag="Schedule Actions" delay="next_frame_time() - now()" duration="0" repeats="0" cancel=""></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Response Window" target="Response Window"></transition>
                    </task_system_state>
                    <task_system_state tag="Response Window" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start Timer (FrameTimer)" timer="RW_FrameTimer" timebase="" duration="16" duration_units="ms"></action>
                        <action type="assignment" tag="Update Cursor Position X" variable="IO_cursor_x" value="-CTRL_Xmax * IO_joystickX_calib"></action>
                        <action type="assignment" tag="Update Cursor Position Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct target hit" condition="(CTRL_target_flag1 #AND RDP_direction ==0) #OR (CTRL_target_flag2 #AND RDP_direction ==90) #OR (CTRL_target_flag3 #AND RDP_direction ==180) #OR (CTRL_target_flag4 #AND RDP_direction ==270)" target="Hit"></transition>
                        <transition type="conditional" tag="If wrong target, go to error" condition="(CTRL_target_flag1 #AND RDP_direction !=0) #OR (CTRL_target_flag2 #AND RDP_direction !=90) #OR (CTRL_target_flag3 #AND RDP_direction !=180) #OR (CTRL_target_flag4 #AND RDP_direction !=270)" target="Error"></transition>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to Response Window" target="Response Window" timer="RW_FrameTimer"></transition>
                    </task_system_state>
                    <task_system_state tag="Hit" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Set TRIAL_reactionEvent to 1" variable="TRIAL_reactionEvent" value="1"></action>
                        <action type="report" tag="Report Hit" message="++ outcome: Hit"></action>
                        <action type="assignment" tag="Set Trial outcome to hit" variable="TRIAL_outcome" value="&quot;hit&quot;"></action>
                        <action type="assignment" tag="INFO_HitCounter + 1" variable="INFO_HitCounter" value="INFO_HitCounter + 1"></action>
                        <action type="assignment" tag="Set SC_in" variable="SC_in" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to end trial" target="End Trial"></transition>
                    </task_system_state>
                    <task_system_state tag="Error" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report Error" message="++ outcome: Error"></action>
                        <action type="assignment" tag="Set Trial outcome to error" variable="TRIAL_outcome" value="&quot;error&quot;"></action>
                        <action type="assignment" tag="Set SC_in 0" variable="SC_in" value="0"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to end trial" target="End Trial"></transition>
                    </task_system_state>
                    <task_system_state tag="False Alarm" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Set TRIAL_reactionEvent to 1" variable="TRIAL_reactionEvent" value="1"></action>
                        <action type="report" tag="Report False alarm" message="++ outcome: False alarm"></action>
                        <action type="assignment" tag="Set Trial outcome to false alarm" variable="TRIAL_outcome" value="&quot;false alarm&quot;"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to end trial" target="End Trial"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Dequeue Targets" condition="1">
                            <action tag="Dequeue Target 1" type="dequeue_stimulus" stimulus="target1"></action>
                            <action tag="Dequeue Target 2" type="dequeue_stimulus" stimulus="target2"></action>
                            <action tag="Dequeue Target 3" type="dequeue_stimulus" stimulus="target3"></action>
                            <action tag="Dequeue Target 4" type="dequeue_stimulus" stimulus="target4"></action>
                            <action tag="Dequeue Target_coin 1" type="dequeue_stimulus" stimulus="target_coin1"></action>
                            <action tag="Dequeue Target_coin 2" type="dequeue_stimulus" stimulus="target_coin2"></action>
                            <action tag="Dequeue Target_coin 3" type="dequeue_stimulus" stimulus="target_coin3"></action>
                            <action tag="Dequeue Target_coin 4" type="dequeue_stimulus" stimulus="target_coin4"></action>
                            <action tag="Dequeue Start Area" type="dequeue_stimulus" stimulus="start_area"></action>
                            <action tag="Dequeue RDP" type="dequeue_stimulus" stimulus="RDP"></action>
                            <action type="assignment" tag="Reset Target 1 Flag" variable="CTRL_target_flag1" value="0"></action>
                            <action type="assignment" tag="Reset Target 2 Flag" variable="CTRL_target_flag2" value="0"></action>
                            <action type="assignment" tag="Reset Target 3 Flag" variable="CTRL_target_flag3" value="0"></action>
                            <action type="assignment" tag="Reset Target 4 Flag" variable="CTRL_target_flag4" value="0"></action>
                        </action>
                        <action type="assignment" tag="Reset TRIAL_reactionTrigger to 0" variable="TRIAL_reactionTrigger" value="0"></action>
                        <action type="assignment" tag="Reset TRIAL_reactionEvent to 0" variable="TRIAL_reactionEvent" value="0"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="if" tag="Set Matlab variables" condition="1">
                            <action type="assignment" tag="set ML sync" variable="ML_sync" value="0"></action>
                            <action type="assignment" tag="set ML trial end" variable="ML_trialEnd" value="ML_trialStart"></action>
                        </action>
                        <action type="report" tag="Report end of cycle" message="END OF TRIAL $ML_trialEnd **********************"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Wait for joystick" target="Wait for joystick"></transition>
                    </task_system_state>
                </task_system>
            </trial>
            <action type="stop_device_IO" tag="Stop Eyelink" device="Eyelink"></action>
        </protocol>
        <protocol tag="Pre-test RT" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action type="start_device_IO" tag="start Eyelink" device="Eyelink"></action>
            <action tag="Queue Background" type="queue_stimulus" stimulus="Background"></action>
            <action tag="Start mIO" type="start_device_IO" device="mIO"></action>
            <action tag="Live Queue Cursor" type="live_queue_stimulus" stimulus="cursor"></action>
            <action type="if" tag="Set Parameter" condition="1">
                <action type="assignment" tag="Set CTRL_RequiredHitNo" variable="CTRL_RequiredHitNo" value="100"></action>
                <action type="assignment" tag="Set IO_start_area_size" variable="IO_start_area_size" value="3"></action>
                <action type="assignment" tag="Set IO_start_area_alpha" variable="IO_start_area_alpha" value=".3"></action>
                <action type="assignment" tag="Set Staircase Starting point" variable="SC_index_starting" value="1"></action>
                <action type="assignment" tag="Set additional collision area" variable="CTRL_target_collision_area" value="3"></action>
                <action type="assignment" tag="Set CTRL_ITI_ms" variable="CTRL_ITI_ms" value="500"></action>
                <action type="assignment" tag="Set CTRL_PreRT_ResponseWindow" variable="CTRL_PreRT_ResponseWindow" value="5000"></action>
                <action type="assignment" tag="Reset INFO_HitCounter" variable="INFO_HitCounter" value="0"></action>
                <action type="assignment" tag="Reset ML_trialStart" variable="ML_trialStart" value="0"></action>
                <action type="assignment" tag="Reset ML_trialEnd" variable="ML_trialEnd" value="0"></action>
            </action>
            <action tag="Update Display" type="update_stimulus_display"></action>
            <trial tag="Main Task System" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="LOOP" interruptible="YES">
                    <task_system_state tag="Wait for joystick" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue start_area" type="queue_stimulus" stimulus="start_area"></action>
                        <action type="assignment" tag="Update Cursor Position X" variable="IO_cursor_x" value="-CTRL_Xmax * IO_joystickX_calib"></action>
                        <action type="assignment" tag="Update Cursor Position Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If Cursor inside start area, go to New Trial" condition="IO_start_area_flag" target="New Trial"></transition>
                        <transition type="conditional" tag="If Cursor inside start area, go to Wait For Joystick" condition="IO_start_area_flag == 0" target="Wait for joystick"></transition>
                    </task_system_state>
                    <task_system_state tag="New Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Set Matlab variables" condition="1">
                            <action type="assignment" tag="set ML sync" variable="ML_sync" value="1"></action>
                            <action type="assignment" tag="set ML trial start" variable="ML_trialStart" value="ML_trialStart + 1"></action>
                            <action type="assignment" tag="Log task name" variable="INFO_task" value="&quot;pre-test-RT&quot;"></action>
                        </action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="start_timer" tag="Start TargetTimer" timer="TargetTimer" timebase="" duration="disc_rand(500,1000)" duration_units="ms"></action>
                        <action type="report" tag="Report trial start" message="===== TRIAL $ML_trialStart STARTS====="></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Go to update Wait for Target" target="Wait for Target"></transition>
                    </task_system_state>
                    <task_system_state tag="Wait for Target" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start FrameTimer" timer="FrameTimer" timebase="" duration="16" duration_units="ms"></action>
                        <action type="assignment" tag="Update Cursor Position X" variable="IO_cursor_x" value="-CTRL_Xmax * IO_joystickX_calib"></action>
                        <action type="assignment" tag="Update Cursor Position Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to Wait for Target" target="Wait for Target" timer="FrameTimer"></transition>
                        <transition type="conditional" tag="if TargetTimer Expired go to Show Target" condition="timer_expired(TargetTimer)" target="Show Target"></transition>
                    </task_system_state>
                    <task_system_state tag="Show Target" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report" message="-- Show Targets"></action>
                        <action tag="Live Queue cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue start_area" type="dequeue_stimulus" stimulus="start_area"></action>
                        <action type="if" tag="Determine target coordinates" condition="1">
                            <action type="assignment" tag="Draw CTRL_target_direction" variable="CTRL_target_direction" value="disc_rand(0,359)"></action>
                            <action type="assignment" tag="Calculate CTRL_target_x" variable="CTRL_target_x" value="sin((CTRL_target_direction)*(pi/180))* (RDP_radius + (CTRL_target_size/2))"></action>
                            <action type="assignment" tag="Calculate CTRL_target_y" variable="CTRL_target_y" value="cos((CTRL_target_direction)*(pi/180))*(RDP_radius+ (CTRL_target_size/2))"></action>
                            <action tag="Live Queue Target" type="live_queue_stimulus" stimulus="target"></action>
                            <action tag="Live Queue Target_coin" type="live_queue_stimulus" stimulus="target_coin"></action>
                        </action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="assignment" tag="Set TRIAL_reactionTrigger to 1" variable="TRIAL_reactionTrigger" value="1"></action>
                        <action type="schedule" tag="Schedule Actions" delay="next_frame_time() - now()" duration="CTRL_PreRT_ResponseWindow" repeats="0" cancel=""></action>
                        <action type="start_timer" tag="Start ResponseTimer" timer="ResponseTimer" timebase="" duration="CTRL_PreRT_ResponseWindow" duration_units="ms"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to ..." target="Response Window"></transition>
                    </task_system_state>
                    <task_system_state tag="Response Window" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start FrameTimer" timer="FrameTimer" timebase="" duration="16" duration_units="ms"></action>
                        <action type="assignment" tag="Update Cursor Position X" variable="IO_cursor_x" value="-CTRL_Xmax * IO_joystickX_calib"></action>
                        <action type="assignment" tag="Update Cursor Position Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct target hit" condition="CTRL_target_flag" target="Hit"></transition>
                        <transition type="timer_expired" tag="If ResponseTimer Expired, Transition to Miss" target="Miss" timer="ResponseTimer"></transition>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to Response Window" target="Response Window" timer="FrameTimer"></transition>
                    </task_system_state>
                    <task_system_state tag="Hit" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Set TRIAL_reactionEvent to 1" variable="TRIAL_reactionEvent" value="1"></action>
                        <action type="report" tag="report Hit" message="++ outcome: Hit"></action>
                        <action type="assignment" tag="set Trial outcome to hit" variable="TRIAL_outcome" value="&quot;hit&quot;"></action>
                        <action type="assignment" tag="INFO_HitCounter + 1" variable="INFO_HitCounter" value="INFO_HitCounter + 1"></action>
                        <action type="assignment" tag="set SC_in" variable="SC_in" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to end trial" target="End Trial"></transition>
                    </task_system_state>
                    <task_system_state tag="Miss" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="report Miss" message="++ outcome: Miss"></action>
                        <action type="assignment" tag="set Trial outcome to miss" variable="TRIAL_outcome" value="&quot;miss&quot;"></action>
                        <action type="assignment" tag="set SC_in 0" variable="SC_in" value="0"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to end trial" target="End Trial"></transition>
                    </task_system_state>
                    <task_system_state tag="False Alarm" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Set TRIAL_reactionEvent to 1" variable="TRIAL_reactionEvent" value="1"></action>
                        <action type="report" tag="report False alarm" message="++ outcome: False alarm"></action>
                        <action type="assignment" tag="set Trial outcome to error" variable="TRIAL_outcome" value="&quot;false alarm&quot;"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to end trial" target="End Trial"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI_Timer" timer="ITITimer" timebase="" duration="CTRL_ITI_ms" duration_units="ms"></action>
                        <action type="if" tag="Dequeue Targets" condition="1">
                            <action tag="Dequeue Target" type="dequeue_stimulus" stimulus="target"></action>
                            <action tag="Dequeue Target_coin" type="dequeue_stimulus" stimulus="target_coin"></action>
                            <action tag="Dequeue Start Area" type="dequeue_stimulus" stimulus="start_area"></action>
                        </action>
                        <action type="assignment" tag="Reset TRIAL_reactionTrigger" variable="TRIAL_reactionTrigger" value="0"></action>
                        <action type="assignment" tag="Reset TRIAL_reactionEvent" variable="TRIAL_reactionEvent" value="0"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="if" tag="Set Matlab variables" condition="1">
                            <action type="assignment" tag="set ML sync" variable="ML_sync" value="0"></action>
                            <action type="assignment" tag="set ML trial end" variable="ML_trialEnd" value="ML_trialStart"></action>
                        </action>
                        <action type="report" tag="report end of cycle" message="END OF TRIAL $ML_trialEnd **********************"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If required number of targets collected, end paradigm" condition="INFO_HitCounter &gt;= CTRL_RequiredHitNo" target="End paradigm"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start FrameTimer" timer="FrameTimer" timebase="" duration="16" duration_units="ms"></action>
                        <action type="assignment" tag="Update Cursor Position X" variable="IO_cursor_x" value="-CTRL_Xmax * IO_joystickX_calib"></action>
                        <action type="assignment" tag="Update Cursor Position Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to ITI" target="ITI" timer="FrameTimer"></transition>
                        <transition type="timer_expired" tag="If ITI_Timer Expired, Transition to Wait for joystick" target="Wait for joystick" timer="ITITimer"></transition>
                    </task_system_state>
                    <task_system_state tag="End paradigm" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report" message="==== $INFO_HitCounter COINS COLLECTED ===="></action>
                        <action type="report" tag="Report" message="==== ENDING PARADIGM ===="></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="yield" tag="Exit Task System..."></transition>
                    </task_system_state>
                </task_system>
            </trial>
            <action type="stop_device_IO" tag="stop Eyelink" device="Eyelink"></action>
        </protocol>
        <protocol tag="CPR_steady" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action type="start_device_IO" tag="Start Eyelink" device="Eyelink"></action>
            <action tag="Start Joystick" type="start_device_IO" device="mIO"></action>
            <action tag="Queue Background" type="live_queue_stimulus" stimulus="Background"></action>
            <action type="if" tag="Training settings" condition="INFO_training == 1">
                <action type="assignment" tag="Set CTRL_RequiredHitNo" variable="CTRL_RequiredHitNo" value="10"></action>
                <action type="assignment" tag="Set CTRL_ITI_ms" variable="CTRL_ITI_ms" value="1000"></action>
                <action type="assignment" tag="Set CTRL_target_duration" variable="CTRL_target_duration" value="500"></action>
                <action type="assignment" tag="Set CTRL_steadyState_min" variable="CTRL_steadyState_min" value="1500"></action>
                <action type="assignment" tag="Set CTRL_steadyState_max" variable="CTRL_steadyState_max" value="3000"></action>
                <action type="assignment" tag="Set IO_start_area_size" variable="IO_start_area_size" value="2"></action>
                <action type="assignment" tag="Set IO_start_area_alpha" variable="IO_start_area_alpha" value=".3"></action>
                <action tag="Live Queue Feedback Accuray" type="live_queue_stimulus" stimulus="feedback_accuracy"></action>
                <action tag="Live Queue Feedback Strength" type="live_queue_stimulus" stimulus="feedback_strength"></action>
                <action tag="Live Queue feedback_reward" type="live_queue_stimulus" stimulus="feedback_reward"></action>
                <action type="assignment" tag="Remove collision area" variable="CTRL_target_collision_area" value="0"></action>
                <action type="assignment" tag="Reset INFO_HitCounter" variable="INFO_HitCounter" value="0"></action>
                <action type="assignment" tag="Reset INFO_TargetCounter" variable="INFO_TargetCounter" value="0"></action>
                <action type="assignment" tag="Reset INFO_SteadyStateCounter" variable="INFO_SteadyStateCounter" value="0"></action>
                <action type="assignment" tag="Reset ML_trialStart" variable="ML_trialStart" value="0"></action>
                <action type="assignment" tag="Reset ML_trialEnd" variable="ML_trialEnd" value="0"></action>
            </action>
            <action type="if" tag="Paradigm settings" condition="INFO_training == 0">
                <action type="assignment" tag="Set CTRL_RequiredHitNo" variable="CTRL_RequiredHitNo" value="100"></action>
                <action type="assignment" tag="Set CTRL_snr_thresh" variable="CTRL_snr_thresh" value="20"></action>
                <action type="assignment" tag="Set CTRL_ITI_ms" variable="CTRL_ITI_ms" value="1000"></action>
                <action type="assignment" tag="Set CTRL_target_duration" variable="CTRL_target_duration" value="100"></action>
                <action type="assignment" tag="Set CTRL_steadyState_min" variable="CTRL_steadyState_min" value="1000"></action>
                <action type="assignment" tag="Set CTRL_steadyState_max" variable="CTRL_steadyState_max" value="2500"></action>
                <action type="assignment" tag="Set IO_start_area_size" variable="IO_start_area_size" value="2"></action>
                <action type="assignment" tag="Set IO_start_area_alpha" variable="IO_start_area_alpha" value=".2"></action>
                <action type="assignment" tag="Remove collision area" variable="CTRL_target_collision_area" value="0"></action>
                <action type="assignment" tag="Reset INFO_HitCounter" variable="INFO_HitCounter" value="0"></action>
                <action type="assignment" tag="Reset INFO_TargetCounter" variable="INFO_TargetCounter" value="0"></action>
                <action type="assignment" tag="Reset INFO_SteadyStateCounter" variable="INFO_SteadyStateCounter" value="0"></action>
                <action type="assignment" tag="Reset ML_trialStart" variable="ML_trialStart" value="0"></action>
                <action type="assignment" tag="Reset ML_trialEnd" variable="ML_trialEnd" value="0"></action>
            </action>
            <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
            <action type="assignment" tag="Calculate target size in degree" variable="CTRL_target_deg" value="2 * (asin( (CTRL_target_size/2) / (RDP_radius + (CTRL_target_size/2)) ) * (180/pi))"></action>
            <action type="start_timer" tag="Initialize ColorChangeTimer" timer="ColorChangeTimer" timebase="" duration="0" duration_units="ms"></action>
            <action type="start_timer" tag="Initialize TargetDurationTimer" timer="TargetDurationTimer" timebase="" duration="0" duration_units="ms"></action>
            <trial tag="Trial structure" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="LOOP" interruptible="YES">
                    <task_system_state tag="Wait for Joystick" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start FrameTimer" timer="FrameTimer" timebase="" duration="CTRL_frameTimer_duration" duration_units="ms"></action>
                        <action type="if" tag="Convert cursor position" condition="1">
                            <action type="assignment" tag="... X" variable="IO_cursor_x" value="CTRL_Xmax * IO_joystickX_calib"></action>
                            <action type="assignment" tag="... Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        </action>
                        <action tag="Queue start_area" type="queue_stimulus" stimulus="start_area"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If Cursor inside start area, go to New Trial" condition="IO_start_area_flag == true" target="New Trial"></transition>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to Update Stimuli" target="Wait for Joystick" timer="FrameTimer"></transition>
                    </task_system_state>
                    <task_system_state tag="New Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Set Matlab variables" condition="1">
                            <action type="assignment" tag="set ML trial start" variable="ML_trialStart" value="ML_trialStart + 1"></action>
                            <action type="assignment" tag="set ML sync to" variable="ML_sync" value="1"></action>
                            <action type="assignment" tag="Log task name" variable="INFO_task" value="&quot;Steady_Steps&quot;"></action>
                        </action>
                        <action type="if" tag="Set RDP parameters" condition="1">
                            <action type="assignment" tag="Set RDP direction" variable="RDP_direction" value="disc_rand(0,359)"></action>
                            <action type="assignment" tag="Set RDP Speed to 4" variable="RDP_speed" value="4"></action>
                            <action type="assignment" tag="Draw SNR index" variable="CTRL_snr_idx" value="disc_rand(CTRL_snr_thresh-9, CTRL_snr_thresh)"></action>
                            <action type="assignment" tag="Set RDP coherence" variable="RDP_coherence" value="SC_list[CTRL_snr_idx]"></action>
                            <action type="if" tag="INFO_training == 1" condition="INFO_training == 1">
                                <action type="assignment" tag="Set RDP_coherence" variable="RDP_coherence" value=".9"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Reset INFO_SteadyStateCounter" variable="INFO_SteadyStateCounter" value="0"></action>
                        <action tag="Update Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="report" tag="Report trial start" message="===== TRIAL $ML_trialStart STARTS ====="></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Show Stimuli" target="Show Stimuli"></transition>
                    </task_system_state>
                    <task_system_state tag="Show Stimuli" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Live Queue Stimuli" condition="1">
                            <action tag="Live Queue Arc" type="live_queue_stimulus" stimulus="arc"></action>
                            <action tag="Live Queue ArcMask" type="live_queue_stimulus" stimulus="arcMask"></action>
                            <action tag="Live Queue RDP" type="live_queue_stimulus" stimulus="RDP"></action>
                            <action tag="Live Queue indicator" type="live_queue_stimulus" stimulus="indicator"></action>
                            <action tag="Live Queue Start Area" type="live_queue_stimulus" stimulus="start_area"></action>
                            <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        </action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Set up Target" type="direct" target="Set up Target"></transition>
                    </task_system_state>
                    <task_system_state tag="Set up Target" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="assignment" tag="Set CTRL_target_ON to 0" variable="CTRL_target_ON" value="0"></action>
                        <action type="assignment" tag="Set CTRL_breakout_flag to 0" variable="CTRL_breakout_flag" value="0"></action>
                        <action type="assignment" tag="Set CTRL_hit_flag to 0" variable="CTRL_hit_flag" value="0"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If required number of targets collected, end paradigm" condition="INFO_TargetCounter &gt;= CTRL_RequiredHitNo" target="End Trial"></transition>
                        <transition type="direct" tag="Always Go to Set up steady state" target="Set up steady state"></transition>
                    </task_system_state>
                    <task_system_state tag="Set up steady state" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Sync Matlab" condition="1">
                            <action type="assignment" tag="set ML sync to 0" variable="ML_sync" value="0"></action>
                            <action type="assignment" tag="set ML sync to 1" variable="ML_sync" value="1"></action>
                        </action>
                        <action type="if" tag="Draw new RDP direction" condition="1">
                            <action type="assignment" tag="Roll TMP_dice" variable="TMP_dice" value="disc_rand(0,1)"></action>
                            <action type="if" tag="If TMP_dice == 1" condition="TMP_dice == 1">
                                <action type="assignment" tag="Assign new RDP_direction [+]" variable="RDP_direction" value="RDP_direction + CTRL_directionChange_list[disc_rand(0,3)]"></action>
                            </action>
                            <action type="if" tag="If TMP_dice == 0" condition="TMP_dice == 0">
                                <action type="assignment" tag="Assign new RDP_direction [-]" variable="RDP_direction" value="RDP_direction - CTRL_directionChange_list[disc_rand(0,3)]"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Set Steady State Duration" variable="CTRL_SteadyStateDuration" value="disc_rand(CTRL_steadyState_min,CTRL_steadyState_max)"></action>
                        <action type="assignment" tag="Draw CTRL_target_idx: 25% probability" variable="CTRL_target_idx" value="disc_rand(0,3)"></action>
                        <action type="assignment" tag="Set INFO_SteadyStateCounter +1" variable="INFO_SteadyStateCounter" value="INFO_SteadyStateCounter + 1"></action>
                        <action type="if" tag="If Nth steady state..." condition="INFO_SteadyStateCounter >= CTRL_NoSteadyStates">
                            <action type="assignment" tag="... no target presentation" variable="CTRL_target_idx" value="1"></action>
                        </action>
                        <action type="start_timer" tag="Start SteadyStateDurationTimer" timer="SteadyStateDurationTimer" timebase="" duration="CTRL_SteadyStateDuration" duration_units="ms"></action>
                        <action type="report" tag="Report steady state number" message="--- Steady state $INFO_SteadyStateCounter --- "></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Update Stimuli" target="Update Stimuli"></transition>
                    </task_system_state>
                    <task_system_state tag="Update Stimuli" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start FrameTimer" timer="FrameTimer" timebase="" duration="CTRL_frameTimer_duration" duration_units="ms"></action>
                        <action type="if" tag="IF ColorChangeTimer expired..." condition="timer_expired(ColorChangeTimer)">
                            <action type="assignment" tag="start_area color to black" variable="CTRL_start_area_col_g" value="0"></action>
                        </action>
                        <action type="if" tag="IF TargetDurationTimer expired after hit..." condition="timer_expired(TargetDurationTimer) &amp;&amp; CTRL_target_ON == 1 &amp;&amp; CTRL_hit_flag == 1">
                            <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                            <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                            <action type="assignment" tag="Set CTRL_target_ON to 0" variable="CTRL_target_ON" value="0"></action>
                            <action type="assignment" tag="Set CTRL_breakout_flag to 1" variable="CTRL_breakout_flag" value="1"></action>
                        </action>
                        <action type="if" tag="Convert cursor position" condition="1">
                            <action type="assignment" tag="... X" variable="IO_cursor_x" value="CTRL_Xmax * IO_joystickX_calib"></action>
                            <action type="assignment" tag="... Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        </action>
                        <action type="if" tag="Calculate Accurary" condition="1">
                            <action type="assignment" tag="Correct RDP_direction" variable="TMP_RDPdir" value="(RDP_direction + 360) % 360"></action>
                            <action type="assignment" tag="Update response accuracy" variable="IO_cursor_accuracy" value="abs(1 - abs(TMP_RDPdir - IO_joystickDirection) / 180)"></action>
                            <action type="assignment" tag="Round response accuracy for display" variable="INFO_cursor_accuracyDisplay" value="round(IO_cursor_accuracy * 100) / 100"></action>
                        </action>
                        <action type="if" tag="Update trigger boundaries" condition="1">
                            <action type="assignment" tag="Update CTRL_arc_trigger_min" variable="CTRL_arc_trigger_min" value="(int)(((int)(TMP_RDPdir - (CTRL_arc_width/2) + 360) % 360) + ((180-TMP_RDPdir) + 360)) % 360"></action>
                            <action type="assignment" tag="Update CTRL_arc_trigger_max" variable="CTRL_arc_trigger_max" value="(int)(((int)(TMP_RDPdir + (CTRL_arc_width/2) + 360) % 360) + ((180-TMP_RDPdir) + 360)) % 360"></action>
                        </action>
                        <action type="if" tag="Calculate cursor2target distance" condition="1">
                            <action type="assignment" tag="Normalise joystick direction" variable="TMP_normJoyDir" value="(int)(((int)IO_joystickDirection + (180-TMP_RDPdir) + 360) % 360) "></action>
                            <action type="assignment" tag="Normalise RDP direction" variable="TMP_normStimDir" value="(int)(((int)(TMP_RDPdir + 360) % 360) + ((180-TMP_RDPdir) + 360)) % 360"></action>
                            <action type="assignment" tag="Difference Joystick - Cursor" variable="TMP_joyDeviation" value="abs(TMP_normJoyDir - TMP_normStimDir)"></action>
                            <action type="assignment" tag="Calculate distance from center" variable="IO_cursor_distance2center" value="sqrt(pow(IO_cursor_y,2) + pow(IO_cursor_x,2))"></action>
                        </action>
                        <action type="if" tag="Calculate arc width" condition="1">
                            <action type="assignment" tag="Set arc width" variable="CTRL_arc_width" value="180 - (180 * IO_joystickStrength)"></action>
                            <action type="if" tag="If arc width smaller than target" condition="CTRL_arc_width &lt; CTRL_target_deg">
                                <action type="assignment" tag="Constrain to target size" variable="CTRL_arc_width" value="CTRL_target_deg"></action>
                            </action>
                        </action>
                        <action type="if" tag="Update arc color" condition="1">
                            <action type="assignment" tag="Set CTRL_arc_col_r" variable="CTRL_arc_col_r" value="0"></action>
                            <action type="assignment" tag="Set CTRL_arc_col_g" variable="CTRL_arc_col_g" value="IO_cursor_distance2center / RDP_radius"></action>
                            <action type="assignment" tag="Set CTRL_arc_col_b" variable="CTRL_arc_col_b" value="0"></action>
                            <action type="assignment" tag="Set CTRL_arc_alpha" variable="CTRL_arc_alpha" value="1"></action>
                            <action type="if" tag="If IO_joystickStrength &lt; .1" condition="IO_joystickStrength &lt; CTRL_arc_treshold">
                                <action type="assignment" tag="Set CTRL_arc_alpha" variable="CTRL_arc_alpha" value="0"></action>
                            </action>
                        </action>
                        <action type="if" tag="If CTRL_target_ON == 1" condition="CTRL_target_ON == 1">
                            <action type="assignment" tag="Check if arc triggered" variable="CTRL_arc_flag" value="(TMP_normJoyDir &gt;= CTRL_arc_trigger_min) &amp;&amp; (TMP_normJoyDir &lt;=CTRL_arc_trigger_max)"></action>
                        </action>
                        <action type="assignment" tag="Update TMP_ExtraCash" variable="TMP_ExtraCash" value="round(( (IO_joystickStrength + IO_cursor_accuracy) /2) *100) /1000"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If target dequeued after hit -&gt; Set up target" condition="CTRL_breakout_flag == 1 &amp;&amp; CTRL_hit_flag == 1" target="Set up Target"></transition>
                        <transition type="conditional" tag="If TargetTimer expired -&gt; Present target" condition="CTRL_target_idx == 0 &amp;&amp; timer_expired(SteadyStateDurationTimer) &amp;&amp; CTRL_target_ON == 0" target="Target presentation"></transition>
                        <transition type="conditional" tag="If target overlapping with arc -&gt; Hit" condition="CTRL_arc_flag &amp;&amp; CTRL_target_ON &amp;&amp; CTRL_hit_flag == 0 &amp;&amp; IO_start_area_flag == 0" target="Hit"></transition>
                        <transition type="conditional" tag="If TargetDurationTimer expired &amp; target on &amp; arc not triggered -&gt; Miss" condition="timer_expired(TargetDurationTimer) &amp;&amp; CTRL_arc_flag == 0 &amp;&amp; CTRL_target_ON" target="Miss"></transition>
                        <transition type="conditional" tag="If TargetDurationTimer expired &amp; target on &amp; cursor in start area -&gt; Miss" condition="timer_expired(TargetDurationTimer) &amp;&amp; CTRL_target_ON &amp;&amp; IO_start_area_flag" target="Miss"></transition>
                        <transition type="conditional" tag="After CTRL_NoSteadyStates steady states -&gt; End Trial" condition="INFO_SteadyStateCounter >= CTRL_NoSteadyStates &amp;&amp; timer_expired(SteadyStateDurationTimer)" target="End Trial"></transition>
                        <transition type="conditional" tag="If SteadyStateTimer expired &amp; no target presented -&gt; New steady state" condition="timer_expired(SteadyStateDurationTimer) &amp;&amp; CTRL_target_ON == 0" target="Set up steady state"></transition>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to Update Stimuli" target="Update Stimuli" timer="FrameTimer"></transition>
                    </task_system_state>
                    <task_system_state tag="Target presentation" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Determine target coordinates" condition="1">
                            <action type="assignment" tag="Calculate CTRL_target_x" variable="CTRL_target_x" value="sin((RDP_direction)*(pi/180))*(RDP_radius + (CTRL_target_size/2))"></action>
                            <action type="assignment" tag="Calculate CTRL_target_y" variable="CTRL_target_y" value="cos((RDP_direction)*(pi/180))*(RDP_radius+ (CTRL_target_size/2))"></action>
                        </action>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="assignment" tag="Set target indicator to 1" variable="CTRL_target_ON" value="1"></action>
                        <action type="assignment" tag="Set INFO_TargetCounter + 1" variable="INFO_TargetCounter" value="INFO_TargetCounter + 1"></action>
                        <action type="start_timer" tag="Start TargetDurationTimer" timer="TargetDurationTimer" timebase="" duration="CTRL_target_duration" duration_units="ms"></action>
                        <action type="report" tag="Report target appearance" message="--- SHOW TARGET $INFO_TargetCounter ---"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Update Stimuli" target="Update Stimuli"></transition>
                    </task_system_state>
                    <task_system_state tag="Miss" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Play Sound 'Miss'" type="play_sound" sound="Miss"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="assignment" tag="Set target indicator to 0" variable="CTRL_target_ON" value="0"></action>
                        <action type="assignment" tag="TRIAL_outcome -&gt; Miss" variable="TRIAL_outcome" value="&quot;miss&quot;"></action>
                        <action type="report" tag="Report trial outcome" message="--- OUTCOME: Miss ---"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Set up target" target="Set up Target"></transition>
                    </task_system_state>
                    <task_system_state tag="Hit" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Play Sound 'Reward'" type="play_sound" sound="Reward"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="assignment" tag="TRIAL_outcome -&gt; Hit" variable="TRIAL_outcome" value="&quot;hit&quot;"></action>
                        <action type="assignment" tag="Set CTRL_hit_flag 1" variable="CTRL_hit_flag" value="1"></action>
                        <action type="assignment" tag="Add to INFO_HitCounter" variable="INFO_HitCounter" value="INFO_HitCounter + 1"></action>
                        <action type="assignment" tag="Add to INFO_ExtraCash" variable="INFO_ExtraCash" value="INFO_ExtraCash + TMP_ExtraCash"></action>
                        <action type="report" tag="Report trial outcome" message="--- OUTCOME: Hit ---"></action>
                        <action type="assignment" tag="Change start_area color to green" variable="CTRL_start_area_col_g" value="1"></action>
                        <action type="start_timer" tag="Start ColorChangeTimer" timer="ColorChangeTimer" timebase="" duration="CTRL_start_area_colorChange_ms" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Update Stimuli" target="Update Stimuli"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="Dequeue Stimuli" condition="1">
                            <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                            <action tag="Dequeue RDP" type="dequeue_stimulus" stimulus="RDP"></action>
                            <action tag="Dequeue start_area" type="dequeue_stimulus" stimulus="start_area"></action>
                            <action tag="Dequeue indicator" type="dequeue_stimulus" stimulus="indicator"></action>
                            <action tag="Dequeue arc" type="dequeue_stimulus" stimulus="arc"></action>
                            <action tag="Dequeue arcMask" type="dequeue_stimulus" stimulus="arcMask"></action>
                        </action>
                        <action type="if" tag="Set color to black" condition="1">
                            <action type="assignment" tag="start_area color to black" variable="CTRL_start_area_col_g" value="0"></action>
                            <action type="assignment" tag="Set CTRL_arc_col_r" variable="CTRL_arc_col_r" value="0"></action>
                            <action type="assignment" tag="Set CTRL_arc_col_g" variable="CTRL_arc_col_g" value="0"></action>
                            <action type="assignment" tag="Set CTRL_arc_col_b" variable="CTRL_arc_col_b" value="0"></action>
                        </action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="if" tag="Set Matlab variables" condition="1">
                            <action type="assignment" tag="set ML sync" variable="ML_sync" value="0"></action>
                            <action type="assignment" tag="set ML trial end" variable="ML_trialEnd" value="ML_trialEnd + 1"></action>
                        </action>
                        <action type="report" tag="Report trial end" message="===== TRIAL $ML_trialEnd ENDS ====="></action>
                        <action type="start_timer" tag="Start ITI_Timer" timer="ITI_Timer" timebase="" duration="CTRL_ITI_ms" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start FrameTimer" timer="FrameTimer" timebase="" duration="CTRL_frameTimer_duration" duration_units="ms"></action>
                        <action type="if" tag="Convert cursor position" condition="1">
                            <action type="assignment" tag="... X" variable="IO_cursor_x" value="CTRL_Xmax * IO_joystickX_calib"></action>
                            <action type="assignment" tag="... Y" variable="IO_cursor_y" value="CTRL_Ymax * IO_joystickY_calib"></action>
                        </action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If required number of targets collected, end paradigm" condition="INFO_TargetCounter &gt;= CTRL_RequiredHitNo &amp;&amp; timer_expired(ITI_Timer)" target="End paradigm"></transition>
                        <transition type="timer_expired" tag="If ITI_Timer Expired, Transition to ..." target="Wait for Joystick" timer="ITI_Timer"></transition>
                        <transition type="timer_expired" tag="If FrameTimer Expired, Transition to ITI" target="ITI" timer="FrameTimer"></transition>
                    </task_system_state>
                    <task_system_state tag="End paradigm" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue feedback_reward" type="dequeue_stimulus" stimulus="feedback_reward"></action>
                        <action tag="Dequeue feedback_accuracy" type="dequeue_stimulus" stimulus="feedback_accuracy"></action>
                        <action tag="Dequeue feedback_strength" type="dequeue_stimulus" stimulus="feedback_strength"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display" predicted_output_time=""></action>
                        <action type="report" tag="Report Hits" message="==== $INFO_HitCounter / $INFO_TargetCounter COINS COLLECTED ===="></action>
                        <action type="report" tag="Report End of paradigm" message="==== ENDING PARADIGM ===="></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="yield" tag="Exit Task System..."></transition>
                    </task_system_state>
                </task_system>
            </trial>
            <action type="stop_device_IO" tag="Stop Eyelink" device="Eyelink"></action>
        </protocol>
    </experiment>
</monkeyml>